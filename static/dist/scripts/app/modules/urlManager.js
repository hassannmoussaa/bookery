define([],function(){return{queryParams:{search:null,action:null,entryId:null,page:null},isInitialized:!1,initialUrl:null,currentUrl:null,onChangeHandler:null,init:function(){var r=(new Url).toString();this.initialUrl=r,this.currentUrl=r,this.isInitialized=!0;var e=this;window.history&&window.history.pushState&&(window.onpopstate=function(r){r.state&&(e.parseURL(),e.refresh(!0))}),this.parseURL()},getQueryParam:function(r){return r&&"string"==typeof r&&this.queryParams.hasOwnProperty(r)?(this.parseURL(),this.queryParams[r]):null},changeSearch:function(r){"string"==typeof r?(r=r.trim(),this.queryParams.search=r||null):this.queryParams.search=null,this.queryParams.page=1},changeEntryId:function(r){"string"==typeof r&&(r=r.trim()),r=Number(r),!isNaN(r)&&r>0?this.queryParams.entryId=r:this.queryParams.entryId=null},changePage:function(r){"string"==typeof r&&(r=r.trim()),r=Number(r),!isNaN(r)&&r>0?this.queryParams.page=r:this.queryParams.page=null},refresh:function(r,e){this.isInitialized||this.init();var t=this.generateURL();this.currentUrl==t&&window.history&&window.history.pushState&&!e||(this.currentUrl=t,r||window.history&&window.history.pushState&&window.history.pushState({},"",t),"function"==typeof this.onChangeHandler&&this.onChangeHandler(this.queryParams,t))},changeAction:function(r){"string"==typeof r?(r=r.trim(),this.queryParams.action=r||null):this.queryParams.action=null},generateURL:function(){var r=new Url;return delete r.query.search,delete r.query.action,delete r.query.entry_id,delete r.query.page,"string"==typeof this.queryParams.search&&""!=this.queryParams.search.trim()&&(r.query.search=this.queryParams.search.trim()),"string"==typeof this.queryParams.action&&""!=this.queryParams.action.trim()&&(r.query.action=this.queryParams.action.trim().toLowerCase()),isNaN(Number(this.queryParams.entryId))||(r.query.entry_id=this.queryParams.entryId),isNaN(Number(this.queryParams.page))||(r.query.page=this.queryParams.page),r.toString()},parseURL:function(r){void 0===r?r=new Url:"string"==typeof r&&(r=new Url(r)),this.queryParams={search:null,action:null,entryId:null,page:null},"string"==typeof r.query.search&&""!=r.query.search.trim()&&(this.queryParams.search=r.query.search.trim()),"string"==typeof r.query.action&&""!=r.query.action.trim()&&(this.queryParams.action=r.query.action.trim().toLowerCase()),"string"==typeof r.query.entry_id&&""!=r.query.entry_id.trim()&&(isNaN(Number(r.query.entry_id.trim()))||(this.queryParams.entryId=Number(r.query.entry_id.trim()))),"string"==typeof r.query.page&&""!=r.query.page.trim()&&(isNaN(Number(r.query.page.trim()))||(this.queryParams.page=Number(r.query.page.trim())))}}});